<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>No title</title>

  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="http://apollotang.com/cdn/lib/css/bootstrap.css">
  
    <style type="text/css" >
        * {margin:0px; padding:0px;}
        #x-rule {position: absolute; top:0px; left:-50px;}
    </style>


</head>

<body>

    <!-- <div id="x-rule"><img src="http://apollotang.com/cdn/lib/imgs/ruler_x_1083px.gif"></div> -->
    <div id="message"></div>

    <input type="text" name="txbClientName" id="txbClientName" autocomplete="off" size="20" class="x-form-text client-advisor-control-item-field" style="width: 452px;">

    <button type="submit" id = "mybtn1" class="btn">1</button>
    <button type="submit" id = "mybtn2" class="btn">2</button>
    <button type="submit" id = "mybtn3" class="btn">3</button>
    <button type="submit" id = "mybtn4" class="btn">4</button>

    <p>click button 1 to simulate onchange event in form</p> 


<script src="http://code.jquery.com/jquery-1.8.0.js"></script>
<script src="http://apollotang.com/cdn/lib/js/underscore-1.4.2.js"></script>
<script src="http://apollotang.com/cdn/lib/js/backbone-0.9.2.js"></script>
<script src="http://apollotang.com/cdn/lib/js/safe-console.js"></script>
<script src="http://apollotang.com/cdn//lib/js/_o_/_o_0.0.1.js"></script>
<!-- script>window.jQuery || document.write('<script src="http://localhost/sy/lib/js/jquery-1.7.1.min.js"><\/script>')</script-->


<script type="text/javascript">
console.log('jQuery version ' + jQuery().jquery);
// - - - - - - - - - - - - - -

//http://stackoverflow.com/questions/961532/firing-a-keyboard-event-in-javascript
	function simulateKeyEvent(character) {
		var evt = document.createEvent("KeyboardEvent");
		
		//evt.initKeyEvent("keypress", true, true, window,
		//0, 0, 0, 0,
		//0, '115'); 
		
		evt.initKeyboardEvent("keypress", true, true, window,
		0, 0, 0, 0,
		0, 13); 
		
		var canceled = !elem.dispatchEvent(evt);
		if(canceled) {
			// A handler called preventDefault
			alert("canceled");
		} else {
			// None of the handlers called preventDefault
			alert("not canceled");
		}
	}



// define the event callback
function changed() { 
console.log('changed'); 
elem.style.border = 'solid blue 1px'; 
if (!e) var e = window.event;
	console.log(e.type);
}



// store element in variable elem
var elem = document.getElementById("txbClientName");

// change the style to make sure we have store the element in variable "elem"
elem.style.color = 'red';
elem.style.border = 'solid red 1px';

// add event handler callback
elem.onchange = changed;
simulateKeyEvent();

// when button one is click it will simulate onChange event     
$('#mybtn1').on('click', function(){
    // http://stackoverflow.com/questions/2856513/trigger-onchange-event-manually
    if ("fireEvent" in elem)
        elem.fireEvent("onchange");
    else
    {
        var evt = document.createEvent("HTMLEvents");
        evt.initEvent("change", false, true);
        elem.dispatchEvent(evt);
    }        
});
$('#mybtn2').on('click', function(){
            
});
$('#mybtn3').on('click', function(){
            
});
$('#mybtn4').on('click', function(){
            
});


// - - - - - - - - - - - - - -
</script>	
</body>

</html>
